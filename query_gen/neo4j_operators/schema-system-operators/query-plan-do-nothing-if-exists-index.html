<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<title>Do Nothing If Exists (index)</title>
<style>body { font-family: Arial, sans-serif; max-width: 1200px; margin: 20px auto; padding: 0 20px; }</style>
</head>
<body>
<p><strong>类别:</strong> Schema and system operators</p>
<p><strong>来源:</strong> <a href='https://neo4j.com/docs/cypher-manual/25/planning-and-tuning/operators/operators-detail/#query-plan-do-nothing-if-exists-index'>https://neo4j.com/docs/cypher-manual/25/planning-and-tuning/operators/operators-detail/#query-plan-do-nothing-if-exists-index</a></p>
<hr>
<h3 id="query-plan-do-nothing-if-exists-index"><a class="anchor" href="#query-plan-do-nothing-if-exists-index"></a>Do Nothing If Exists (index)</h3>
<div class="paragraph">
<p>To not get an error creating the same index twice, we use the <code>DoNothingIfExists</code> operator for indexes.
This will make sure no other index with the given name or schema already exists before the <code>CreateIndex</code> operator creates an index.
If it finds an index with the given name or schema it will stop the execution and no new index is created.
The following query will create an index with the name <code>my_index</code> on the <code>since</code> property of relationships with the <code>KNOWS</code> relationship type only if no such index already exists.</p>
</div>
<div class="exampleblock">
<div class="title">Example 132. DoNothingIfExists(INDEX)</div>
<div class="content">
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-cypher hljs" data-lang="cypher">PROFILE
CREATE INDEX my_index IF NOT EXISTS
FOR ()-[k:KNOWS]-() ON (k.since)</code></pre>
</div>
</div>
<div class="listingblock queryplan">
<div class="title">Query Plan</div>
<div class="content">
<pre>Planner ADMINISTRATION

Runtime SCHEMA

Runtime version 2025.11

+---------------------------+----------------------------------------------------+
| Operator                  | Details                                            |
+---------------------------+----------------------------------------------------+
| +CreateIndex              | RANGE INDEX my_index FOR ()-[:KNOWS]-() ON (since) |
| |                         +----------------------------------------------------+
| +DoNothingIfExists(INDEX) | RANGE INDEX my_index FOR ()-[:KNOWS]-() ON (since) |
+---------------------------+----------------------------------------------------+

Total database accesses: ?</pre>
</div>
</div>
</div>
</div>
</body>
</html>
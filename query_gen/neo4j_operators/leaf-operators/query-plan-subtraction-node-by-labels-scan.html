<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<title>Subtraction Node By Labels Scan</title>
<style>body { font-family: Arial, sans-serif; max-width: 1200px; margin: 20px auto; padding: 0 20px; }</style>
</head>
<body>
<p><strong>类别:</strong> Leaf operators (scans and seeks)</p>
<p><strong>来源:</strong> <a href='https://neo4j.com/docs/cypher-manual/25/planning-and-tuning/operators/operators-detail/#query-plan-subtraction-node-by-labels-scan'>https://neo4j.com/docs/cypher-manual/25/planning-and-tuning/operators/operators-detail/#query-plan-subtraction-node-by-labels-scan</a></p>
<hr>
<h3 id="query-plan-subtraction-node-by-labels-scan"><a class="anchor" href="#query-plan-subtraction-node-by-labels-scan"></a>Subtraction Node By Labels Scan</h3>
<div class="paragraph">
<p>The <code>SubtractionNodeByLabelsScan</code> operator fetches all nodes that have all of the first set of provided labels and none of the second provided set of labels from the node label index.
In the example below, <code>SubtractionNodeByLabelsScan</code> retrieves all nodes that have the <code>Location</code> label but do not have the <code>Country</code> label.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-cypher hljs" data-lang="cypher">PROFILE
MATCH (locationNotCountry:Location&amp;!Country)
RETURN locationNotCountry</code></pre>
</div>
</div>
<div class="listingblock queryplan">
<div class="title">Query Plan</div>
<div class="content">
<pre>Planner COST

Runtime PIPELINED

Runtime version 2025.11

Batch size 128

+------------------------------+----+--------------------------------------+----------------+------+---------+----------------+------------------------+-----------+---------------------+
| Operator                     | Id | Details                              | Estimated Rows | Rows | DB Hits | Memory (Bytes) | Page Cache Hits/Misses | Time (ms) | Pipeline            |
+------------------------------+----+--------------------------------------+----------------+------+---------+----------------+------------------------+-----------+---------------------+
| +ProduceResults              |  0 | locationNotCountry                   |              7 |   10 |       0 |              0 |                        |           |                     |
| |                            +----+--------------------------------------+----------------+------+---------+----------------+                        |           |                     |
| +SubtractionNodeByLabelsScan |  1 | locationNotCountry:Location&amp;!Country |              7 |   10 |      13 |            248 |                    2/0 |     3.081 | Fused in Pipeline 0 |
+------------------------------+----+--------------------------------------+----------------+------+---------+----------------+------------------------+-----------+---------------------+

Total database accesses: 13, total allocated memory: 312</pre>
</div>
</div>
</div>
</div>
</body>
</html>
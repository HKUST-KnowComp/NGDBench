<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<title>Eager</title>
<style>body { font-family: Arial, sans-serif; max-width: 1200px; margin: 20px auto; padding: 0 20px; }</style>
</head>
<body>
<p><strong>类别:</strong> Data modification operators</p>
<p><strong>来源:</strong> <a href='https://neo4j.com/docs/cypher-manual/25/planning-and-tuning/operators/operators-detail/#query-plan-eager'>https://neo4j.com/docs/cypher-manual/25/planning-and-tuning/operators/operators-detail/#query-plan-eager</a></p>
<hr>
<h3 id="query-plan-eager"><a class="anchor" href="#query-plan-eager"></a>Eager</h3>
<div class="paragraph">
<p>The <code>Eager</code> operator causes all preceding operators to execute fully, for the whole dataset, before continuing execution.
This is done to ensure isolation between parts of the query plan that might otherwise affect each other.</p>
</div>
<div class="paragraph">
<p>Values from the graph are fetched in a lazy manner; i.e. a pattern matching might not be fully exhausted before updates are applied.
To maintain correct semantics, the query planner will insert <code>Eager</code> operators into the query plan to prevent updates from influencing pattern matching, or other read operations.
This scenario is exemplified by the query below, where the <code>DELETE</code> clause would otherwise influence both the <code>MATCH</code> clause and the <code>MERGE</code> clause.
For more information on how the <code>Eager</code> operator can ensure correct semantics, see the section on <a class="xref page" href="../../../clauses/clause-composition/">Clause composition</a>.</p>
</div>
<div class="paragraph">
<p>The <code>Eager</code> operator can cause high memory usage when importing data or migrating graph structures.
In such cases, the operations should be split into simpler steps; e.g. importing nodes and relationships separately.
Alternatively, the records to be updated can be returned, followed by an update statement.</p>
</div>
<div class="exampleblock">
<div class="title">Example 124. Eager</div>
<div class="content">
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-cypher hljs" data-lang="cypher">PROFILE
MATCH (a:Person {name: 'me'}), (b:Person {name: 'Bob'})
DETACH DELETE a, b
MERGE (:Person {name: 'me'})</code></pre>
</div>
</div>
<div class="listingblock queryplan">
<div class="title">Query Plan</div>
<div class="content">
<pre>Planner COST

Runtime PIPELINED

Runtime version 2025.11

Batch size 128

+---------------------+----+------------------------------------------------------------------------------------------------+----------------+------+---------+----------------+------------------------+-----------+---------------------+
| Operator            | Id | Details                                                                                        | Estimated Rows | Rows | DB Hits | Memory (Bytes) | Page Cache Hits/Misses | Time (ms) | Pipeline            |
+---------------------+----+------------------------------------------------------------------------------------------------+----------------+------+---------+----------------+------------------------+-----------+---------------------+
| +ProduceResults     |  0 |                                                                                                |              0 |    0 |       0 |              0 |                        |           |                     |
| |                   +----+------------------------------------------------------------------------------------------------+----------------+------+---------+----------------+                        |           |                     |
| +EmptyResult        |  1 |                                                                                                |              0 |    0 |       0 |                |                        |           |                     |
| |                   +----+------------------------------------------------------------------------------------------------+----------------+------+---------+----------------+                        |           |                     |
| +Apply              |  2 |                                                                                                |              0 |    1 |       0 |                |                        |           |                     |
| |\                  +----+------------------------------------------------------------------------------------------------+----------------+------+---------+----------------+                        |           |                     |
| | +Merge            |  3 | CREATE (anon_0:Person {name: $autostring_2})                                                   |              0 |    1 |       3 |                |                        |           |                     |
| | |                 +----+------------------------------------------------------------------------------------------------+----------------+------+---------+----------------+                        |           |                     |
| | +NodeIndexSeek    |  4 | RANGE INDEX anon_0:Person(name) WHERE name = $autostring_2                                     |              0 |    0 |       1 |           3304 |                    1/0 |     0.663 | Fused in Pipeline 3 |
| |                   +----+------------------------------------------------------------------------------------------------+----------------+------+---------+----------------+------------------------+-----------+---------------------+
| +Eager              |  5 | read/delete conflict for variable: anon_0 (Operator: 6 vs 4, and 1 more conflicting operators) |              0 |    1 |       0 |            360 |                    0/0 |     0.008 | In Pipeline 2       |
| |                   +----+------------------------------------------------------------------------------------------------+----------------+------+---------+----------------+------------------------+-----------+---------------------+
| +DetachDelete       |  6 | b                                                                                              |              0 |    1 |       4 |                |                        |           |                     |
| |                   +----+------------------------------------------------------------------------------------------------+----------------+------+---------+----------------+                        |           |                     |
| +DetachDelete       |  7 | a                                                                                              |              0 |    1 |       5 |                |                        |           |                     |
| |                   +----+------------------------------------------------------------------------------------------------+----------------+------+---------+----------------+                        |           |                     |
| +Eager              |  8 | read/delete conflict for variable: b (Operator: 6 vs 9, and 1 more conflicting operators),     |              0 |    1 |       0 |            360 |                    1/0 |     0.226 | Fused in Pipeline 1 |
| |                   |    | read/set conflict for label: Person (Operator: 3 vs 9),                                        |                |      |         |                |                        |           |                     |
| |                   |    | read/set conflict for property: name (Operator: 3 vs 9)                                        |                |      |         |                |                        |           |                     |
| |                   +----+------------------------------------------------------------------------------------------------+----------------+------+---------+----------------+------------------------+-----------+---------------------+
| +MultiNodeIndexSeek |  9 | RANGE INDEX a:Person(name) WHERE name = $autostring_0,                                         |              0 |    1 |       4 |            376 |                    2/0 |     0.218 | In Pipeline 0       |
|                     |    | RANGE INDEX b:Person(name) WHERE name = $autostring_1                                          |                |      |         |                |                        |           |                     |
+---------------------+----+------------------------------------------------------------------------------------------------+----------------+------+---------+----------------+------------------------+-----------+---------------------+

Total database accesses: 17, total allocated memory: 4184</pre>
</div>
</div>
</div>
</div>
</body>
</html>
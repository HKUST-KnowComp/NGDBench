<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<title>Cache Properties</title>
<style>body { font-family: Arial, sans-serif; max-width: 1200px; margin: 20px auto; padding: 0 20px; }</style>
</head>
<body>
<p><strong>类别:</strong> Filter, order, and projection operators</p>
<p><strong>来源:</strong> <a href='https://neo4j.com/docs/cypher-manual/25/planning-and-tuning/operators/operators-detail/#query-plan-cache-properties'>https://neo4j.com/docs/cypher-manual/25/planning-and-tuning/operators/operators-detail/#query-plan-cache-properties</a></p>
<hr>
<h3 id="query-plan-cache-properties"><a class="anchor" href="#query-plan-cache-properties"></a>Cache Properties</h3>
<div class="paragraph">
<p>The <code>CacheProperties</code> operator reads nodes and relationship properties and caches them in the current row.
Future accesses to these properties can avoid reading from the store which will speed up the query.
In the plan below we will cache <code>l.name</code> before <code>Expand(All)</code> where there are fewer rows.</p>
</div>
<div class="exampleblock">
<div class="title">Example 91. CacheProperties</div>
<div class="content">
<div class="listingblock">
<div class="title">Query</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-cypher hljs" data-lang="cypher">PROFILE
MATCH (l:Location)&lt;-[:WORKS_IN]-(p:Person)
RETURN
  l.name AS location,
  p.name AS name</code></pre>
</div>
</div>
<div class="listingblock queryplan">
<div class="title">Query Plan</div>
<div class="content">
<pre>Planner COST

Runtime PIPELINED

Runtime version 2025.11

Batch size 128

+------------------+----+-------------------------------------------+----------------+------+---------+----------------+------------------------+-----------+---------------------+
| Operator         | Id | Details                                   | Estimated Rows | Rows | DB Hits | Memory (Bytes) | Page Cache Hits/Misses | Time (ms) | Pipeline            |
+------------------+----+-------------------------------------------+----------------+------+---------+----------------+------------------------+-----------+---------------------+
| +ProduceResults  |  0 | location, name                            |             13 |   13 |       0 |                |                        |           |                     |
| |                +----+-------------------------------------------+----------------+------+---------+----------------+                        |           |                     |
| +Projection      |  1 | cache[l.name] AS location, p.name AS name |             13 |   13 |      26 |                |                        |           |                     |
| |                +----+-------------------------------------------+----------------+------+---------+----------------+                        |           |                     |
| +Filter          |  2 | p:Person                                  |             13 |   13 |      26 |                |                        |           |                     |
| |                +----+-------------------------------------------+----------------+------+---------+----------------+                        |           |                     |
| +Expand(All)     |  3 | (l)&lt;-[anon_0:WORKS_IN]-(p)                |             13 |   13 |      24 |                |                        |           |                     |
| |                +----+-------------------------------------------+----------------+------+---------+----------------+                        |           |                     |
| +CacheProperties |  4 | cache[l.name]                             |             10 |   10 |      20 |                |                        |           |                     |
| |                +----+-------------------------------------------+----------------+------+---------+----------------+                        |           |                     |
| +NodeByLabelScan |  5 | l:Location                                |             10 |   10 |      11 |            120 |                    4/0 |     0.344 | Fused in Pipeline 0 |
+------------------+----+-------------------------------------------+----------------+------+---------+----------------+------------------------+-----------+---------------------+

Total database accesses: 107, total allocated memory: 200</pre>
</div>
</div>
</div>
</div>
</body>
</html>